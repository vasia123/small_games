import{_ as h}from"./InputText.vue.d807619c.js";import{_ as k}from"./InputTextarea.vue.0bdba224.js";import{_ as F}from"./nuxt-link.d31b60c2.js";import{_ as N}from"./TitleCard.vue.1933d09b.js";import{_ as T}from"./ModalError.vue.68c0c190.js";import{u as B}from"./useFirebaseDB.5baf7228.js";import{f as I,r as l,o as d,c as u,b as o,w as _,i as s,F as $,a as c,l as p,d as f,m as D,P as E,s as U}from"./entry.0534d1ea.js";import{u as A}from"./auth.af7fb95f.js";const M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j={class:"flex justify-between mt-8"},G=["disabled"],L={key:0,class:"loading loading-spinner"},O=I({__name:"new",setup(P){const t=l(""),a=l(""),i=l(""),g=A(),{gamesAndQuestionsCol:b}=B(),n=l(!1);async function v(){if(t.value===""){i.value="введите Название";return}n.value=!0;try{const e={userID:g.userId,name:t.value,description:a.value,rounds:[]};await E(b,e),await U("/admin")}catch(e){n.value=!1,e instanceof Error?i.value=e.message:console.error("Unexpected error",e)}}return(e,r)=>{const x=h,V=k,w=F,y=N,C=T;return d(),u($,null,[o(y,{title:"Добавление игры"},{default:_(()=>[c("div",M,[o(x,{modelValue:s(t),"onUpdate:modelValue":r[0]||(r[0]=m=>p(t)?t.value=m:null),type:"text","label-title":"Название"},null,8,["modelValue"]),o(V,{modelValue:s(a),"onUpdate:modelValue":r[1]||(r[1]=m=>p(a)?a.value=m:null),"label-title":"Описание"},null,8,["modelValue"])]),c("div",j,[o(w,{class:"btn btn-ghost",to:"/admin"},{default:_(()=>[f("Отмена")]),_:1}),c("button",{class:"btn btn-primary",disabled:s(n),onClick:v},[s(n)?(d(),u("span",L)):D("",!0),f(" Добавить игру ")],8,G)])]),_:1}),o(C,{message:s(i)},null,8,["message"])],64)}}});export{O as default};
